#include <assert.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdint.h>

int main(int argc, char* argv[])
{
    for(int i=1; i<argc ; i++)
    {
        printf("%s\n",argv[i]);
        int file = open(argv[i], 1);
        printf("coucou");
        struct stat buf;
        printf("coucou");
        fstat(file, &buf);
        printf("coucou");
        void* adresse = mmap(NULL, buf.st_size, PROT_READ|PROT_WRITE, MAP_SHARED|MAP_FILE, file, 0);
        write(file, adresse, buf.st_size);
        printf("%s",(char*)adresse);
        printf("coucou");
        munmap(adresse, buf.st_size);
        close(file);
    }    

    return 0;
}
